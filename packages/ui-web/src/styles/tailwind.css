@import 'tailwindcss';

/*
 * Tailwind v4 "source scan" note:
 *
 * When consumers import this stylesheet from `node_modules/@lss/ui-web/...`,
 * Tailwind will NOT discover classnames inside the library bundle unless we
 * explicitly point it at our compiled `dist` output.
 *
 * This keeps `@lss/ui-web` working "out of the box" without requiring every app
 * to add a custom `@source` for the package.
 */
@source '../dist/index.js';

/*
 * Dark mode strategy (single source of truth).
 *
 * - Tokens are switched via `data-theme="dark"` (and we also support `.dark` for compatibility).
 * - Tailwind `dark:*` utilities must follow the same trigger, otherwise UI-kit components will
 *   partially break when only tokens or only `dark:*` are active.
 */
@custom-variant dark (&:where(:root[data-theme='dark'], :root[data-theme='dark'] *, :root.dark, :root.dark *));

:root {
  /* LSS semantic tokens (light) */
  --lss-bg: #fefafa;
  --lss-surface: #ffffff;
  --lss-surface-2: #f7f8fa;

  --lss-text-primary: #1f2328;
  --lss-text-secondary: #6c757d;
  --lss-text-muted: #8a9199;
  --lss-on-accent: #ffffff;

  --lss-border: #e0e0e0;

  --lss-accent: #159e7e;
  --lss-accent-soft: #e9f7f1;
  --lss-focus: rgba(21, 158, 126, 0.35);

  color-scheme: light;
}

/*
 * IMPORTANT: Do NOT use `:where(...)` for token overrides.
 *
 * `:where()` has zero specificity, so it won't reliably override `:root` tokens
 * when both selectors match the same element (common when the theme attribute/class
 * is placed on `html` which is also `:root`). Use a selector with non-zero
 * specificity instead.
 *
 * Smoke-check:
 * - With `data-theme="dark"` on `html` (or `.dark`), `--lss-bg` should be `#1a1a1a`
 *   and `--lss-text-primary` should be `#f2f2f2`.
 */
:root[data-theme='dark'],
:root.dark {
  /* LSS semantic tokens (dark) */
  --lss-bg: #1a1a1a;
  --lss-surface: #232323;
  --lss-surface-2: #2c2c2c;

  --lss-text-primary: #f2f2f2;
  --lss-text-secondary: #a0a0a0;
  --lss-text-muted: #7a7a7a;
  --lss-on-accent: #ffffff;

  --lss-border: #3a3a3a;

  --lss-accent: #159e7e;
  --lss-accent-soft: #27433c;
  --lss-focus: rgba(21, 158, 126, 0.45);

  color-scheme: dark;
}

@theme {
  /* Typography */
  --font-sans: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  --font-sans--font-feature-settings: 'cv11';

  /* Radii (Design System) */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 12px;
  --radius-full: 999px;

  /*
   * Tailwind colors backed by semantic tokens.
   * These generate utilities like: bg-bg, text-text-primary, border-border, ring-focus, etc.
   */
  --color-bg: var(--lss-bg);
  --color-surface: var(--lss-surface);
  --color-surface-2: var(--lss-surface-2);

  --color-text-primary: var(--lss-text-primary);
  --color-text-secondary: var(--lss-text-secondary);
  --color-text-muted: var(--lss-text-muted);
  --color-on-accent: var(--lss-on-accent);

  --color-border: var(--lss-border);

  --color-accent: var(--lss-accent);
  --color-accent-soft: var(--lss-accent-soft);
  --color-focus: var(--lss-focus);
}
